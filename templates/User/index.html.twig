{% extends 'base.html.twig' %}
{% block body %}
    <div class="container-fluid">
        <div class="col-lg-12 col-md-12  col-sm-12 col-xs-12 mb2">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center mb2 mt2">
                <h3> Bonjour {{ app.user.prenom }} ,<br><br>
                    <span> Bienvenue dans votre espace client ! </span>
                </h3>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
                <!-- Tab links -->
                <div class="tab">
                    <button class="tablinks" onclick="openCity(event, 'mesformations')" id="defaultOpen">Mes formations en cour</button>
                    <button class="tablinks" onclick="openCity(event, 'formationfaire')">Formation à fair</button>
                    <button class="tablinks" onclick="openCity(event, 'formationterminee')">Formation terminée</button>
                    <button class="tablinks" onclick="openCity(event, 'rendez-vous')">Vos rendez-vous avec un coach</button>
                    <button class="tablinks" onclick="openCity(event, 'invite')">Invite en attende</button>
                </div>

                <!-- Tab content -->
                <div id="mesformations" class=" col-lg-12 col-md-12 col-sm-12 col-xs-12 tabcontent">
                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="border: 1px solid black">
                            {% for key, formation in formations %}
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center mb2 mt2 formationdiv" id="formationdiv"  onclick="showformation({{ formation.idformation }})">
                                        {% for key, img in (formation.contenuImg) %}
                                            {% if key == 0 %}
                                                <div class="col-md-4 imgformation" >
                                                <img class="img-responsive" src="{{img.urlImage }}">
                                                </div>
                                            {% endif %}
                                        {% endfor %}
                                        <div class="col-md-7">
                                        <h4 class="text-left"> {{ formation.nomformation }} </h4>
                                            <div id="myProgress">
                                                <div id="myBar"></div>
                                            </div>
                                        </div>
                                </div>
                            {% endfor %}

                    </div>
                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8" id="formation">
                       <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
                           <h1 id="titreformation"></h1>
                       </div>

                        <div id="myCarousel" class="carousel slide" data-ride="carousel" style="display: none">
                            <!-- Indicators -->
                            <ol class="carousel-indicators">
                                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                                <li data-target="#myCarousel" data-slide-to="1"></li>
                                <li data-target="#myCarousel" data-slide-to="2"></li>
                            </ol>

                            <!-- Wrapper for slides -->
                            <div class="carousel-inner">
                                <div class="item active">
                                    <img src="" alt="Los Angeles" id="img1">
                                </div>

                                <div class="item">
                                    <img src="" alt="Chicago" id="img2">
                                </div>

                                <div class="item">
                                    <img src="" alt="New York" id="img3">
                                </div>
                            </div>

                            <!-- Left and right controls -->
                            <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                                <span class="glyphicon glyphicon-chevron-left"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="right carousel-control" href="#myCarousel" data-slide="next">
                                <span class="glyphicon glyphicon-chevron-right"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>

                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt2" style="height: 250px; overflow-y: scroll; ">
                            <div class="text-center">
                            <h4 id="titre"></h4>
                            </div>
                            <p id="text" class="text-justify"></p>
                        </div>

                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt2" id="porcentage" style="display: none">
                            <div class="col-lg-4">
                            <p>porcentage : </p>
                            </div>
                            <div class="col-lg-8">
                            <div id="myProgress">
                                <div id="myBar"></div>
                            </div>
                            </div>
                        </div>

                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt2" id="date" style="display: none">
                            <p class="text-left"> Vous avez commence cette formation le : 15/12/2018</p>
                        </div>


                    </div>
                </div>

                <div id="formationfaire" class="tabcontent">
                    <h3>Paris</h3>
                    <p>Paris is the capital of France.</p>
                </div>

                <div id="formationterminee" class="tabcontent">
                    <h3>Tokyo</h3>
                    <p>Tokyo is the capital of Japan.</p>
                </div>

                <div id="rendez-vous" class="tabcontent">
                    <h3>Vos rendez-vous </h3>
                    <p>Tokyo is the capital of Japan.</p>
                </div>
                <div id="invite" class="tabcontent">
                    <h3>Vos rendez-vous </h3>
                    <p>Tokyo is the capital of Japan.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function openCity(evt, cityName) {
            // Declare all variables
            var i, tabcontent, tablinks;

            // Get all elements with class="tabcontent" and hide them
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }

            // Get all elements with class="tablinks" and remove the class "active"
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }

            // Show the current tab, and add an "active" class to the button that opened the tab
            document.getElementById(cityName).style.display = "block";
            evt.currentTarget.className += " active";
        }
        // Get the element with id="defaultOpen" and click on it
        document.getElementById("defaultOpen").click();


        function move() {
            var elem = document.getElementById("myBar");
            var width = 100;
            var id = setInterval(frame, 15);
            function frame() {
                if (width >= 100) {
                    clearInterval(id);
                } else {
                    width++;
                    elem.style.width = width + '%';
                }
            }
        }

        function showformation(id) {

            $.ajax({url: "user_formation/"+ id , success: function(result){
                console.log(JSON.parse(result.formation));
                 var item = JSON.parse(result.formation);

                    console.log(item.nom);
                    console.log(item.Description);
                    console.log(item.images[0]);

                    document.getElementById("myCarousel").style.display = "block";
                    document.getElementById("porcentage").style.display = "block";
                    document.getElementById("date").style.display = "block";


                    $('#titreformation').html(item.nom);

                    document.getElementById("img1").src= item.images[0];
                    document.getElementById("img2").src= item.images[0];
                    document.getElementById("img3").src= item.images[0];

                    $('#titre').html(item.titre[0]);
                    $('#text').html(item.text[0]);

                }});



        }
    </script>

{% endblock %}